<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=preload as=font href=/fonts/vendor/jost/jost-v4-latin-regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=/fonts/vendor/jost/jost-v4-latin-700.woff2 type=font/woff2 crossorigin><link rel=stylesheet href=/main.e694d66a3c6fa2afcf7e22fe274cbf7b68826715be967e6a094a0037ad19d8af7fd4aea40cbda5561cbd6de1467925a993b85f84e42079c0ff1bf116de1b226c.css integrity="sha512-5pTWajxvoq/PfiL+J0y/e2iCZxW+ln5qCUoAN60Z2K9/1K6kDL2lVhy9beFGeSWpk7hfhOQgecD/G/EW3hsibA==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>Decompilación - Taller de Hacking Competitivo</title><meta name=description content="DCC universidad de Chile"><link rel=canonical href=/docs/reversa/decompiling/><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="/logo_redondo.png"><meta name=twitter:title content="Decompilación"><meta name=twitter:description content="Con decompilación nos referiremos a la acción de tomar un programa compilado, ya sea a código binario o bytecode, y devolverlo a una forma legible para humanos. Esto puede ser código Assembler, o algo un poco más sofisticado, como C, Java, Python, .Net, PHP, entre otros. Hacer esto de manera manual se puede volver prohibitivamente costoso y difícil, pero afortunadamente existen algunas herramientas que ayudan en el proceso, y muchas veces logran obtener un código casi idéntico al original."><meta name=twitter:site content="@dccuchile"><meta name=twitter:creator content="@dccuchile"><meta property="og:title" content="Decompilación"><meta property="og:description" content="Con decompilación nos referiremos a la acción de tomar un programa compilado, ya sea a código binario o bytecode, y devolverlo a una forma legible para humanos. Esto puede ser código Assembler, o algo un poco más sofisticado, como C, Java, Python, .Net, PHP, entre otros. Hacer esto de manera manual se puede volver prohibitivamente costoso y difícil, pero afortunadamente existen algunas herramientas que ayudan en el proceso, y muchas veces logran obtener un código casi idéntico al original."><meta property="og:type" content="article"><meta property="og:url" content="/docs/reversa/decompiling/"><meta property="og:image" content="/logo_redondo.png"><meta property="article:published_time" content="2020-10-06T08:48:45+00:00"><meta property="article:modified_time" content="2023-06-16T12:44:00-04:00"><meta property="og:site_name" content="Taller de Hacking Competitivo"><meta property="article:publisher" content="https://www.facebook.com/DCCUChile"><meta property="article:author" content="https://www.facebook.com/DCCUChile"><meta property="og:locale" content="es_CL"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"\/"},{"@type":"ListItem","position":2,"name":"Docsreversadecompiling","item":"\/docsreversadecompiling\/"}]}</script><meta name=theme-color content="#fff"><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest></head><body class="docs single"><div class="header-bar fixed-top"></div><header class="navbar fixed-top navbar-expand-md navbar-light"><div class=container><input class="menu-btn order-0" type=checkbox id=menu-btn>
<label class="menu-icon d-md-none" for=menu-btn><span class=navicon></span></label><a class="navbar-brand order-1 order-md-0 mr-auto" href=/><img class=logo-light src=/images/banner.svg></img>
<img class=logo-dark src=/images/banner_dark.svg></img></a>
<button id=mode class="btn btn-link order-2 order-md-4" type=button aria-label="Toggle mode">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span><span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button><ul class="navbar-nav social-nav order-3 order-md-5"><li class=nav-item><a class=nav-link href=https://github.com/cc5325/apunte><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77a5.44 5.44.0 00-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg><span class="ml-2 sr-only">GitHub</span></a></li></ul><div class="collapse navbar-collapse order-4 order-md-1"><ul class="navbar-nav main-nav mr-auto order-5 order-md-2"><li class=nav-item><a class=nav-link href=/blog/>Videos</a></li><li class=nav-item><a class=nav-link href=/docs/prologo/intro>Apunte</a></li><li class=nav-item><a class=nav-link href=/writeups/>Writeups</a></li><li class=nav-item><a class=nav-link href=/tareas/>Evaluaciones</a></li><li class=nav-item><a class=nav-link href=/acerca>Acerca</a></li></ul><div class="break order-6 d-md-none"></div><form class="navbar-form flex-grow-1 order-7 order-md-3"><input id=userinput class="form-control is-search" type=search placeholder="Buscar Documentación..." aria-label="Buscar Documentación..." autocomplete=off><div id=suggestions class="shadow bg-white rounded"></div></form></div></div></header><div class="wrap container" role=document><div class=content><div class="row flex-xl-nowrap"><div class="col-lg-5 col-xl-4 docs-sidebar"><nav class=docs-links aria-label="Main navigation"><h3>Prólogo</h3><ul class=list-unstyled><li><a class=docs-link href=/docs/prologo/intro/>Prólogo</a></li></ul><h3>Esteganografía</h3><ul class=list-unstyled><li><a class=docs-link href=/docs/stego/intro/>Intro a la Esteganografía</a></li><li><a class=docs-link href=/docs/stego/conceptos-basicos/>Conceptos Básicos</a></li><li><a class=docs-link href=/docs/stego/cripto-clasica/>Criptografía Clásica</a></li><li><a class=docs-link href=/docs/stego/stego/>Stego en texto, imágenes y audio</a></li><li><a class=docs-link href=/docs/stego/ejercicios/>Ejercicios de Stego</a></li></ul><h3>Criptografía Moderna</h3><ul class=list-unstyled><li><a class=docs-link href=/docs/cripto-moderna/intro/>Intro a Criptografía Moderna</a></li><li><a class=docs-link href=/docs/cripto-moderna/hashing/>Hashing</a></li><li><a class=docs-link href=/docs/cripto-moderna/cripto-simetrica/>Criptografía Simétrica</a></li><li><a class=docs-link href=/docs/cripto-moderna/cripto-asimetrica/>Criptografía Asimétrica</a></li><li><a class=docs-link href=/docs/cripto-moderna/ejercicios/>Ejercicios Cripto Moderna</a></li></ul><h3>Aplicaciones Web</h3><ul class=list-unstyled><li><a class=docs-link href=/docs/apps-web/intro/>Intro a Aplicaciones Web</a></li><li><a class=docs-link href=/docs/apps-web/tecnicas-basicas/>Técnicas Básicas de Análisis Web</a></li><li><a class=docs-link href=/docs/apps-web/xss/>Cross-Site Scripting</a></li><li><a class=docs-link href=/docs/apps-web/inyecciones/>Inyecciones</a></li><li><a class=docs-link href=/docs/apps-web/rce/>Remote Code Execution</a></li><li><a class=docs-link href=/docs/apps-web/reverse-shell/>Reverse Shell</a></li><li><a class=docs-link href=/docs/apps-web/access-control/>Broken Access Control</a></li><li><a class=docs-link href=/docs/apps-web/cve/>Common Vulnerabilities and Exposures</a></li><li><a class=docs-link href=/docs/apps-web/ejercicios/>Ejercicios Apps Web</a></li></ul><h3>Análisis Forense</h3><ul class=list-unstyled><li><a class=docs-link href=/docs/forense/intro/>Introducción al Análisis Forense</a></li><li><a class=docs-link href=/docs/forense/cmd-logs/>Comandos, Logs y Configuraciones</a></li><li><a class=docs-link href=/docs/forense/versionado-recuperacion/>Versionado y Recuperación de Archivos</a></li><li><a class=docs-link href=/docs/forense/wireshark/>Wireshark</a></li><li><a class=docs-link href=/docs/forense/ejercicios/>Ejercicios de Forense</a></li></ul><h3>Ingeniería Reversa</h3><ul class=list-unstyled><li><a class=docs-link href=/docs/reversa/intro/>Intro a la Ingeniería Reversa</a></li><li><a class="docs-link active" href=/docs/reversa/decompiling/>Decompilación</a></li><li><a class=docs-link href=/docs/reversa/deobfuscation/>Deobfuscación</a></li><li><a class=docs-link href=/docs/reversa/ejercicios/>Ejercicios Reversing</a></li></ul><h3>Pwning</h3><ul class=list-unstyled><li><a class=docs-link href=/docs/pwning/intro/>Intro al Pwning</a></li><li><a class=docs-link href=/docs/pwning/permisos-linux/>Permisos de Usuario en Linux</a></li><li><a class=docs-link href=/docs/pwning/escalamiento-privilegios/>Escalamiento de Privilegios</a></li><li><a class=docs-link href=/docs/pwning/buffer-overflow/>Buffer Overflow</a></li><li><a class=docs-link href=/docs/pwning/ejercicios/>Ejercicios de Pwning</a></li></ul><h3>OSINT</h3><ul class=list-unstyled><li><a class=docs-link href=/docs/osint/intro/>Intro a OSINT</a></li><li><a class=docs-link href=/docs/osint/google/>Google Hacking</a></li><li><a class=docs-link href=/docs/osint/github/>Búsqueda en Github</a></li><li><a class=docs-link href=/docs/osint/theharvester/>The Harvester</a></li><li><a class=docs-link href=/docs/osint/haveibeenpwned/>Have I Been Pwned</a></li><li><a class=docs-link href=/docs/osint/shodan/>Shodan</a></li><li><a class=docs-link href=/docs/osint/ejercicios/>Ejercicios OSINT</a></li></ul><h3>Hardware</h3><ul class=list-unstyled><li><a class=docs-link href=/docs/hardware/intro/>Intro a Hardware</a></li><li><a class=docs-link href=/docs/hardware/firmware/>Reversing de Firmware</a></li><li><a class=docs-link href=/docs/hardware/communication/>Protocolos de Comunicación</a></li><li><a class=docs-link href=/docs/hardware/ejercicios/>Ejercicios de Hardware</a></li></ul><h3>Anexos</h3><ul class=list-unstyled><li><a class=docs-link href=/docs/anexos/herramientas/>Herramientas</a></li><li><a class=docs-link href=/docs/anexos/vpn/>Configuración de VPN</a></li><li><a class=docs-link href=/docs/anexos/kali/>Kali Linux</a></li><li><a class=docs-link href=/docs/anexos/proxy/>Proxy</a></li><li><a class=docs-link href=/docs/anexos/comandos/>Comandos de Terminal de Linux</a></li><li><a class=docs-link href=/docs/anexos/referencias/>Referencias</a></li></ul></nav></div><nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Secondary navigation"><div class=page-links><h3>Contenidos</h3><nav id=TableOfContents><ul><li><a href=#decompilación-de-binarios>Decompilación de Binarios</a><ul><li><a href=#radare2>Radare2</a></li><li><a href=#ghidra>Ghidra</a></li><li><a href=#cutter>Cutter</a></li></ul></li><li><a href=#decompilación-de-bytecode>Decompilación de Bytecode</a><ul><li><a href=#java>Java</a></li><li><a href=#python>Python</a></li></ul></li></ul></nav></div></nav><main class="docs-content col-lg-11 col-xl-9 mx-xl-auto"><h1>Decompilación</h1><p class=lead></p><p>Con decompilación nos referiremos a la acción de tomar un programa compilado, ya sea a código binario o
bytecode, y devolverlo a una forma legible para humanos. Esto puede ser código Assembler, o algo un poco
más sofisticado, como C, Java, Python, .Net, PHP, entre otros. Hacer esto de manera manual se puede volver prohibitivamente costoso
y difícil, pero afortunadamente existen algunas herramientas que ayudan en el proceso, y muchas veces logran
obtener un código casi idéntico al original. Esto claramente irá variando caso a caso, pero de todas formas
analizar un código en C poco legible, o incluso en Assembler, es mucho más fácil que hacerlo para
código binario.</p><h2 id=decompilación-de-binarios>Decompilación de Binarios<a href=#decompilación-de-binarios class=anchor aria-hidden=true>#</a></h2><p>La decompilación de binarios puede tomar 2 formas:</p><ul><li><p><strong>Decompilación Estática</strong>: Toma como entrada el código binario y retorna uno o más archivos con código
decompilado. Esto sirve para analizar el código de manera estática, como también para realizar cambios al
código y ver cómo se comporta.</p></li><li><p><strong>Decompilación en Tiempo de Ejecución</strong>: Se ejecuta el código de una forma especial, que permite ver las
instrucciones y datos utilizados durante la ejecución en formato Assembler. Funciona de manera similar a un
debugger, teniendo la capacidad de iterar por las instrucciones una a una y definir <em>break points</em>.
Adicionalmente, permite leer y modificar directamente los registros de la CPU y la memoria del proceso.</p></li></ul><p>Las herramientas más utilizadas son <a href=https://ghidra-sre.org/>Ghidra</a> para la decompilación estática, y
<a href=https://rada.re/n/radare2.html>radare2</a> para la decompilación en tiempo real.</p><p>A modo de ejemplo ocuparemos una implementación de Fibonacci en C, la cual la decompilaremos luego usando
Ghidra y radare2.</p><pre><code>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

int fibonacci(int n) {
        if (n == 1 || n == 2) {
                return 1;
        }
        return fibonacci(n - 1) + fibonacci(n - 2);
}

void main(int argc, char *argv[]) {
        int n = atoi(argv[1]);
        int f = fibonacci(n);
        printf(&quot;%d\n&quot;, f);
}
</code></pre><p>La compilamos:</p><pre><code>gcc -o fibonacci fibonacci.c
</code></pre><p>Y vemos que funciona como esperamos:</p><p><img src=../c-exec.png alt="C Exec"></p><h3 id=radare2>Radare2<a href=#radare2 class=anchor aria-hidden=true>#</a></h3><p>Radare2 nos permite ejecutar el código, y al mismo tiempo decompilarlo a Assembler. Este tiene muchas opciones
y funcionalidades, y se puede volver bastante complejo de usar, por lo que es recomendable revisar la
<a href=https://book.rada.re/index.html>documentación</a> y tutoriales como
<a href=https://www.megabeets.net/a-journey-into-radare-2-part-1/>este</a>.</p><p>Empezaremos por lanzar radare2 en modo debug para analizar el ejecutable. Notar que es necesario entregarle
un argumento a fibonacci, sino fallará. Una vez dentro de radare2, realizamos un análisis básico del binario.</p><p><img src=../radare2-launch.png alt="Radare2 Launch"></p><p>Luego, listamos las funciones definidas para entender mejor la estructura interna. Vemos 2 que nos podrían
interesar: <em>main</em> y <em>sym.fibonacci</em>.</p><p><img src=../radare2-functions.png alt="Radare2 Functions"></p><p>Definimos un <em>break point</em> en la función <em>main</em> y dejamos correr el proceso. Para ver el código decompilado
(o desensamblado), ejecutamos <code>pdf</code> (por Print Disassembled Function). Esto nos muestra 3 columnas:
la dirección de memoria de la instrucción, la instrucción en hexadecimal, y la instrucción desensamblada
en formato Assembler.</p><p><img src=../radare2-main.png alt="Radare2 Main"></p><p>Observamos que aparecen algunas cosas interesantes, como las llamadas a funciones y el string utilizado
para formatear e imprimir el resultado. Ahora definimos un <em>break point</em> en la dirección de memoria en donde
se llama a la función <em>sym.fibonacci</em>, y continuamos con la ejecución.</p><p><img src=../radare2-break.png alt="Radare2 Break"></p><p>Para entrar a la función, ejecutamos solo una instrucción (la llamada a la función) usando el comando <code>ds</code>.</p><p><img src=../radare2-fibonacci.png alt="Radare2 Fibonacci"></p><p>Finalmente, pueden ver un diagrama de flujos usando el comando <code>VV</code>. Esto les puede ayudar a entender
los distintos caminos de ejecución que puede tomar el proceso y qué sucede en cada uno.</p><p><img src=../radare2-diagram.png alt="Radare2 Diagram"></p><h3 id=ghidra>Ghidra<a href=#ghidra class=anchor aria-hidden=true>#</a></h3><p>Para decompilar el ejecutable, primero abrimos Ghidra y creamos un proyecto cualquiera.</p><p><img src=../ghidra-project.png alt="Ghidra Project"></p><p>Luego hacemos click en la herramienta <em>CodeBrowser</em> (En <em>Tool Chest</em> es el dragón verde) e importamos el archivo.
Debería aparecer un popup preguntando si desean analizarlo, y dicen que sí. Aparecerá mucha información, más
de la que se espera para un código tan simple. Esta corresponde a las librerías utilizadas (<em>stdio</em> y <em>stdlib</em>),
al igual que algunas otras definiciones.</p><p><img src=../ghidra-ui.png alt="Ghidra UI"></p><p>A la izquierda está en panel de <em>Symbol Tree</em>, con un dropdown llamado <em>Functions</em>. Si seleccionan la función
fibonacci podrán ver el código decompilado de la función que definimos. Es bastante parecido al código
original, pero se ven claras diferencias y es menos legible.</p><p><img src=../ghidra-decompiled.png alt="Ghidra Decompiled"></p><h3 id=cutter>Cutter<a href=#cutter class=anchor aria-hidden=true>#</a></h3><p><a href=https://cutter.re>Cutter</a> es una herramienta <em>open source</em> similar a las anteriores pero con
una interfaz más moderna. Al ejecutar Cutter, vemos una ventana donde podemos
seleccionar un tema y el idioma.</p><p><img src=../cutter-welcome.png alt="Cutter Welcome"></p><p>Al continuar, veremos una ventana donde podemos escoger un archivo.</p><p><img src=../cutter-project.png alt="Cutter Project"></p><p>Una vez se escoge un archivo, se abre el espacio de trabajo de Cutter. Lo primero que se ve
es un resumen (&ldquo;overview&rdquo;) con información del archivo.</p><p><img src=../cutter-overview.png alt="Cutter Overview"></p><p>A la izquierda podemos ver una lista de funciones. Abajo, tenemos varias pestañas, con
el disassembly, hexdump, decompilación, gráficos y otras visualizaciones más. Por ejemplo,
podemos seleccionar la función <code>loc.hex1</code> y ver su diagrama en la pestaña <code>Graph</code>.</p><p><img src=../cutter-graph.png alt="Cutter Graph"></p><h2 id=decompilación-de-bytecode>Decompilación de Bytecode<a href=#decompilación-de-bytecode class=anchor aria-hidden=true>#</a></h2><p>El bytecode es una especie de código compilado, pero no a lenguaje de máquina, sino que a un lenguaje intermedio
pensado para ser ejecutado en un ambiente virtualizado. Luego, el bytecode es análogo a un lenguaje
Assembler para la máquina virtual que lo corre.
Se utiliza mucho para transformar lenguajes interpretados en algo un poco más eficiente de ejecutar,
pero sin tener que implementar un compilador completo.
Este bytecode usualmente no difiere mucho del código original, y puede ser decompilado directamente,
casi sin alteraciones. Esto suele ser mucho más fácil de analizar que los binarios decompilados, ya que se
obtiene inmediatamente código en un lenguaje de alto nivel.</p><h3 id=java>Java<a href=#java class=anchor aria-hidden=true>#</a></h3><p>En el caso de Java, el código se compila para ser ejecutado en la Java Virtual Machine (JVM).
El bytecode se encuentra en los archivos <code>.class</code> generados al hacer la compilación, los cuales también
pueden ser obtenidos desde un archivo empaquetado <code>.jar</code>. Estos pueden ser decompilados directamente
con <a href=https://java-decompiler.github.io/>JD-GUI</a>.</p><p>Como ejemplo crearemos un ejecutable <code>.jar</code> y realizaremos el proceso para decompilarlo. El código será un
simple Hello World en el archivo <code>HelloWorld.java</code>.</p><pre><code>public class HelloWorld {
	public static void main(String[] args) {
		System.out.println(&quot;Hello World!&quot;);
	}
}
</code></pre><p>Necesitaremos un manifesto para crear el <code>.jar</code> correctamente. Para eso debemos tener el archivo
<code>MANIFEST.MF</code> con el contenido:</p><pre><code>Main-Class: HelloWorld
</code></pre><p>Luego compilamos y empaquetamos el código:</p><p><img src=../java-compiling.png alt="Java Compiling"></p><p>Al ejecutar el archivo <code>HelloWorld.jar</code> verificamos que efectivamente hace lo que queremos:</p><p><img src=../java-exec.png alt="Java Exec"></p><p>Para decompilar el código simplemente abrimos el archivo <code>HelloWorld.jar</code> con el decompilador JD-GUI, lo que
nos muestra un código Java casi idéntico al original.</p><p><img src=../java-decompiled.png alt="Java Decompiled"></p><h3 id=python>Python<a href=#python class=anchor aria-hidden=true>#</a></h3><p>Si bien Python es un lenguaje interpretado, también tiene una forma compilada. Estos son los archivos <code>.pyc</code>
o <code>.pyo</code> que aparecen a veces dentro de <code>__pycache__</code>.
Para decompilar el bytecode de Python, se puede utilizar librerías de Python:
<a href=https://github.com/rocky/python-decompile3>decompyle3</a> para Python3.7 en adelante
(aún no hay soporte para Python3.9), y <a href=https://pypi.org/project/uncompyle6/>uncompyle6</a>
para versiones anteriores. Se usan en la terminal de manera muy simple:</p><pre><code>decompyle3 &lt;archivo pyc o pyo&gt;
uncompyle6 &lt;archivo pyc o pyo&gt;
</code></pre><p>Como ejemplo ocuparemos un script para calcular PI usando la fórmula de Leibniz y Python2.7.</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=kn>import</span> <span class=nn>sys</span>

<span class=k>def</span> <span class=nf>Leibniz</span><span class=p>(</span><span class=n>n</span><span class=p>):</span>
    <span class=n>s</span> <span class=o>=</span> <span class=mf>0.0</span>
    <span class=n>k</span> <span class=o>=</span> <span class=mf>1.0</span>
    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>n</span><span class=p>):</span>
        <span class=k>if</span> <span class=n>i</span> <span class=o>%</span> <span class=mi>2</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>
            <span class=n>s</span> <span class=o>+=</span> <span class=mi>4</span> <span class=o>/</span> <span class=n>k</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>s</span> <span class=o>-=</span> <span class=mi>4</span> <span class=o>/</span> <span class=n>k</span>
        <span class=n>k</span> <span class=o>+=</span> <span class=mi>2</span>
    <span class=k>return</span> <span class=n>s</span>

<span class=n>n</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>sys</span><span class=o>.</span><span class=n>argv</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span>
<span class=n>pi</span> <span class=o>=</span> <span class=n>Leibniz</span><span class=p>(</span><span class=n>n</span><span class=p>)</span>
<span class=k>print</span> <span class=s1>&#39;PI = &#39;</span><span class=p>,</span> <span class=n>pi</span>
</code></pre></div><p>Al ejecutarlo vemos que nos retorna una aproximación de PI que depende del número de iteraciones que definamos.</p><p><img src=../python-exec.png alt="Python Aprox"></p><p>Compilamos el código a bytecode, el cual aparecerá en un nuevo archivo <code>pi.pyc</code>.</p><pre><code>python -m compileall pi.py
</code></pre><p>Finalmente decompilamos el archivo usando uncompyle6 y obtenemos un código casi exactamente igual al original:</p><p><img src=../python-uncompiled.png alt="Python Uncompiled"></p><p class=edit-page><a href=https://github.com/cc5325/apunte/blob/main/content/docs/reversa/decompiling.md><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit-2"><path d="M17 3a2.828 2.828.0 114 4L7.5 20.5 2 22l1.5-5.5L17 3z"/></svg>Editar en GitHub</a>
<span class=date-info><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>Modificado por última vez el 16/06/2023 a las 12:44:00 hrs.</span></p><div class="docs-navigation d-flex justify-content-between"><a href=/docs/reversa/intro/><div class="card my-1"><div class="card-body py-2">&larr; Intro a la Ingeniería Reversa</div></div></a><a class=ml-auto href=/docs/reversa/deobfuscation/><div class="card my-1"><div class="card-body py-2">Deobfuscación &rarr;</div></div></a></div></main></div></div></div><footer class="footer text-muted"><div class=container><div class=row><div class="col-lg-8 order-last order-lg-first"><ul class=list-inline><li class=list-inline-item>Sitio generado con <a href=https://gohugo.io/>Hugo</a> y <a href=https://getdoks.org/>Doks</a></li></ul></div><div class="col-lg-8 order-first order-lg-last text-lg-right"><ul class=list-inline><a href="http://creativecommons.org/licenses/by-sa/4.0/?ref=chooser-v1" target=_blank rel="license noopener noreferrer" style=display:inline-block>CC BY-SA 4.0<img style=height:22px!important;margin-left:3px;vertical-align:text-bottom src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1"><img style=height:22px!important;margin-left:3px;vertical-align:text-bottom src="https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1"><img style=height:22px!important;margin-left:3px;vertical-align:text-bottom src="https://mirrors.creativecommons.org/presskit/icons/sa.svg?ref=chooser-v1"></a></ul></div></div></div></footer><script src=/main.2507c05f91ee016250e43b67b3d342f5a0d9d4dc5264f76cdc4518cd36a9e04cf3022ce8362802e618d8130b6733b53ee845a49e67229eeb3d3e70347db96a2b.js integrity="sha512-JQfAX5HuAWJQ5Dtns9NC9aDZ1NxSZPds3EUYzTap4EzzAizoNigC5hjYEwtnM7U+6EWknmcinus9PnA0fblqKw==" crossorigin=anonymous defer></script><script src=/index.min.fb4719482ae01945c110cccbbf14f0b7d5f16b9093c34a927521e46baeb5ea3fe99bf59b9887708a3d88eada369f85d861f839d1c958bc370b3f4091f8f7d787.js integrity="sha512-+0cZSCrgGUXBEMzLvxTwt9Xxa5CTw0qSdSHka6616j/pm/WbmIdwij2I6to2n4XYYfg50clYvDcLP0CR+PfXhw==" crossorigin=anonymous defer></script><script>MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']],displayMath:[['$$','$$'],['\\[','\\]']],processEscapes:true,processEnvironments:true},options:{skipHtmlTags:['script','noscript','style','textarea','pre']}};window.addEventListener('load',(event)=>{document.querySelectorAll("mjx-container").forEach(function(x){x.parentElement.classList+='has-jax'})});</script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script></body></html>