<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=preload as=font href=/fonts/vendor/jost/jost-v4-latin-regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=/fonts/vendor/jost/jost-v4-latin-700.woff2 type=font/woff2 crossorigin><link rel=stylesheet href=/main.ddfbf41cc15c16add8b3d14df7854d6638589653939d95d9cf5fe4d3daf5bf79bfe19fe129947c9b826d71d46a6ebe6511885864fd42d2dabe157092d30cf1a8.css integrity="sha512-3fv0HMFcFq3Ys9FN94VNZjhYllOTnZXZz1/k09r1v3m/4Z/hKZR8m4JtcdRqbr5lEYhYZP1C0tq+FXCS0wzxqA==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>Escalamiento de Privilegios - Taller de Hacking Competitivo</title><meta name=description content="DCC universidad de Chile"><link rel=canonical href=/docs/pwning/escalamiento-privilegios/><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="/logo_redondo.png"><meta name=twitter:title content="Escalamiento de Privilegios"><meta name=twitter:description content="Teniendo acceso de usuario limitado a una máquina, y entendiendo mejor cómo funcionan los permisos y privilegios en Linux, podemos intentar ejecutar un escalamiento de privilegios, con el objetivo de conseguir acceso a un usuario con más permisos en la máquina. En el caso de un CTF, esto nos puede servir para acceder a archivos cuya lectura se encuentra limitada a ciertos usuarios. Estos archivos podrían contener pistas o incluso las flags que estamos buscando."><meta name=twitter:site content="@dccuchile"><meta name=twitter:creator content="@dccuchile"><meta property="og:title" content="Escalamiento de Privilegios"><meta property="og:description" content="Teniendo acceso de usuario limitado a una máquina, y entendiendo mejor cómo funcionan los permisos y privilegios en Linux, podemos intentar ejecutar un escalamiento de privilegios, con el objetivo de conseguir acceso a un usuario con más permisos en la máquina. En el caso de un CTF, esto nos puede servir para acceder a archivos cuya lectura se encuentra limitada a ciertos usuarios. Estos archivos podrían contener pistas o incluso las flags que estamos buscando."><meta property="og:type" content="article"><meta property="og:url" content="/docs/pwning/escalamiento-privilegios/"><meta property="og:image" content="/logo_redondo.png"><meta property="article:published_time" content="2020-10-06T08:48:45+00:00"><meta property="article:modified_time" content="2021-06-17T11:12:48-04:00"><meta property="og:site_name" content="Taller de Hacking Competitivo"><meta property="article:publisher" content="https://www.facebook.com/DCCUChile"><meta property="article:author" content="https://www.facebook.com/DCCUChile"><meta property="og:locale" content="es_CL"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"\/"},{"@type":"ListItem","position":2,"name":"Docspwningescalamiento Privilegios","item":"\/docspwningescalamiento-privilegios\/"}]}</script><meta name=theme-color content="#fff"><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest></head><body class="docs single"><div class="header-bar fixed-top"></div><header class="navbar fixed-top navbar-expand-md navbar-light"><div class=container><input class="menu-btn order-0" type=checkbox id=menu-btn>
<label class="menu-icon d-md-none" for=menu-btn><span class=navicon></span></label><a class="navbar-brand order-1 order-md-0 mr-auto" href=/><img class=logo-light src=/images/banner.svg></img>
<img class=logo-dark src=/images/banner_dark.svg></img></a>
<button id=mode class="btn btn-link order-2 order-md-4" type=button aria-label="Toggle mode">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span><span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button><ul class="navbar-nav social-nav order-3 order-md-5"><li class=nav-item><a class=nav-link href=https://github.com/cc5325/apunte><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77a5.44 5.44.0 00-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg><span class="ml-2 sr-only">GitHub</span></a></li></ul><div class="collapse navbar-collapse order-4 order-md-1"><ul class="navbar-nav main-nav mr-auto order-5 order-md-2"><li class=nav-item><a class=nav-link href=/blog/>Videos</a></li><li class=nav-item><a class=nav-link href=/docs/prologo/intro>Apunte</a></li><li class=nav-item><a class=nav-link href=/writeups/>Writeups</a></li><li class=nav-item><a class=nav-link href=/tareas/>Evaluaciones</a></li><li class=nav-item><a class=nav-link href=/acerca>Acerca</a></li></ul><div class="break order-6 d-md-none"></div><form class="navbar-form flex-grow-1 order-7 order-md-3"><input id=userinput class="form-control is-search" type=search placeholder="Buscar Documentación..." aria-label="Buscar Documentación..." autocomplete=off><div id=suggestions class="shadow bg-white rounded"></div></form></div></div></header><div class="wrap container" role=document><div class=content><div class="row flex-xl-nowrap"><div class="col-lg-5 col-xl-4 docs-sidebar"><nav class=docs-links aria-label="Main navigation"><h3>Prólogo</h3><ul class=list-unstyled><li><a class=docs-link href=/docs/prologo/intro/>Prólogo</a></li></ul><h3>Esteganografía</h3><ul class=list-unstyled><li><a class=docs-link href=/docs/stego/intro/>Intro a la Esteganografía</a></li><li><a class=docs-link href=/docs/stego/conceptos-basicos/>Conceptos Básicos</a></li><li><a class=docs-link href=/docs/stego/cripto-clasica/>Criptografía Clásica</a></li><li><a class=docs-link href=/docs/stego/stego/>Stego en texto, imágenes y audio</a></li><li><a class=docs-link href=/docs/stego/ejercicios/>Ejercicios de Stego</a></li></ul><h3>Criptografía Moderna</h3><ul class=list-unstyled><li><a class=docs-link href=/docs/cripto-moderna/intro/>Intro a Criptografía Moderna</a></li><li><a class=docs-link href=/docs/cripto-moderna/hashing/>Hashing</a></li><li><a class=docs-link href=/docs/cripto-moderna/cripto-simetrica/>Criptografía Simétrica</a></li><li><a class=docs-link href=/docs/cripto-moderna/cripto-asimetrica/>Criptografía Asimétrica</a></li><li><a class=docs-link href=/docs/cripto-moderna/ejercicios/>Ejercicios Cripto Moderna</a></li></ul><h3>Aplicaciones Web</h3><ul class=list-unstyled><li><a class=docs-link href=/docs/apps-web/intro/>Intro a Aplicaciones Web</a></li><li><a class=docs-link href=/docs/apps-web/tecnicas-basicas/>Técnicas Básicas de Análisis Web</a></li><li><a class=docs-link href=/docs/apps-web/xss/>Cross-Site Scripting</a></li><li><a class=docs-link href=/docs/apps-web/inyecciones/>Inyecciones</a></li><li><a class=docs-link href=/docs/apps-web/rce/>Remote Code Execution</a></li><li><a class=docs-link href=/docs/apps-web/reverse-shell/>Reverse Shell</a></li><li><a class=docs-link href=/docs/apps-web/cve/>Common Vulnerabilities and Exposures</a></li><li><a class=docs-link href=/docs/apps-web/ejercicios/>Ejercicios Apps Web</a></li></ul><h3>Análisis Forense</h3><ul class=list-unstyled><li><a class=docs-link href=/docs/forense/intro/>Introducción al Análisis Forense</a></li><li><a class=docs-link href=/docs/forense/cmd-logs/>Comandos, Logs y Configuraciones</a></li><li><a class=docs-link href=/docs/forense/versionado-recuperacion/>Versionado y Recuperación de Archivos</a></li><li><a class=docs-link href=/docs/forense/wireshark/>Wireshark</a></li><li><a class=docs-link href=/docs/forense/ejercicios/>Ejercicios de Forense</a></li></ul><h3>Ingeniería Reversa</h3><ul class=list-unstyled><li><a class=docs-link href=/docs/reversa/intro/>Intro a la Ingeniería Reversa</a></li><li><a class=docs-link href=/docs/reversa/decompiling/>Decompilación</a></li><li><a class=docs-link href=/docs/reversa/deobfuscation/>Deobfuscación</a></li><li><a class=docs-link href=/docs/reversa/ejercicios/>Ejercicios Reversing</a></li></ul><h3>Pwning</h3><ul class=list-unstyled><li><a class=docs-link href=/docs/pwning/intro/>Intro al Pwning</a></li><li><a class=docs-link href=/docs/pwning/permisos-linux/>Permisos de Usuario en Linux</a></li><li><a class="docs-link active" href=/docs/pwning/escalamiento-privilegios/>Escalamiento de Privilegios</a></li><li><a class=docs-link href=/docs/pwning/buffer-overflow/>Buffer Overflow</a></li><li><a class=docs-link href=/docs/pwning/ejercicios/>Ejercicios de Pwning</a></li></ul><h3>OSINT</h3><ul class=list-unstyled><li><a class=docs-link href=/docs/osint/intro/>Intro a OSINT</a></li><li><a class=docs-link href=/docs/osint/google/>Google Hacking</a></li><li><a class=docs-link href=/docs/osint/github/>Búsqueda en Github</a></li><li><a class=docs-link href=/docs/osint/theharvester/>The Harvester</a></li><li><a class=docs-link href=/docs/osint/haveibeenpwned/>Have I Been Pwned</a></li><li><a class=docs-link href=/docs/osint/shodan/>Shodan</a></li><li><a class=docs-link href=/docs/osint/ejercicios/>Ejercicios OSINT</a></li></ul><h3>Anexos</h3><ul class=list-unstyled><li><a class=docs-link href=/docs/anexos/herramientas/>Herramientas</a></li><li><a class=docs-link href=/docs/anexos/vpn/>Configuración de VPN</a></li><li><a class=docs-link href=/docs/anexos/kali/>Kali Linux</a></li><li><a class=docs-link href=/docs/anexos/proxy/>Proxy</a></li><li><a class=docs-link href=/docs/anexos/comandos/>Comandos de Terminal de Linux</a></li><li><a class=docs-link href=/docs/anexos/referencias/>Referencias</a></li></ul></nav></div><nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Secondary navigation"><div class=page-links><h3>Contenidos</h3><nav id=TableOfContents><ul><li><a href=#algunas-convenciones-de-escalamiento-de-privilegios-en-ctfs>Algunas convenciones de escalamiento de privilegios en CTFs</a></li><li><a href=#lista-de-estrategias-genéricas-para-escalar-privilegios>Lista de estrategias genéricas para escalar privilegios</a></li><li><a href=#bypasses-en-programas-especiales>Bypasses en programas especiales</a></li><li><a href=#scripts-de-enumeración-automática>Scripts de enumeración automática</a><ul><li><a href=#reverse-shell>Reverse Shell</a></li></ul></li></ul></nav></div></nav><main class="docs-content col-lg-11 col-xl-9 mx-xl-auto"><h1>Escalamiento de Privilegios</h1><p class=lead></p><p>Teniendo acceso de usuario limitado a una máquina, y entendiendo mejor cómo funcionan los permisos y privilegios en Linux, podemos intentar ejecutar un <em>escalamiento de privilegios</em>, con el objetivo de conseguir acceso a un usuario con más permisos en la máquina. En el caso de un CTF, esto nos puede servir para acceder a archivos cuya lectura se encuentra limitada a ciertos usuarios. Estos archivos podrían contener pistas o incluso las flags que estamos buscando.</p><h2 id=algunas-convenciones-de-escalamiento-de-privilegios-en-ctfs>Algunas convenciones de escalamiento de privilegios en CTFs<a href=#algunas-convenciones-de-escalamiento-de-privilegios-en-ctfs class=anchor aria-hidden=true>#</a></h2><p>Hay algunas reglas implícitas en la ejecución de CTFs relacionadas con el escalamiento de privilegios, las cuales se enumeran a continuación:</p><ul><li>En general se busca conseguir acceso al usuario <em>root</em>, aunque también puede servir contar con acceso a un usuario con permisos de <em>sudo</em> o a un usuario específico del sistema distinto al usuario con el que se inició el CTF.</li><li>A veces no es necesario conseguir acceso directo a <em>root</em>, sino que basta con usar algún proceso que tiene ese acceso para exfiltrar información de esa cuenta.</li><li>Luego de escalar privilegios con una cuenta, suele ser útil revisar su directorio <code>$HOME</code>:<ul><li>En el caso de una cuenta <em>root</em>, este directorio se encuentra en <code>/root/</code></li><li>En el caso de otra cuenta, el directorio suele encontrarse en <code>/home/&lt;nombre_cuenta></code>, donde <code>&lt;nombre_cuenta></code> corresponde al nombre de usuario de la cuenta con privilegios.</li></ul></li><li>En algunos casos, en el <code>$HOME</code> podría haber un archivo .txt (el cual podría estar oculto) con la flag, lo que finaliza el desafío. Sin embargo, si este archivo no existe, puede que necesitemos revisar si la flag está escondida de otra forma, o si podemos encontrar otra información interesante que nos permita avanzar en el desafío.</li></ul><h2 id=lista-de-estrategias-genéricas-para-escalar-privilegios>Lista de estrategias genéricas para escalar privilegios<a href=#lista-de-estrategias-genéricas-para-escalar-privilegios class=anchor aria-hidden=true>#</a></h2><p>A continuación enumeramos algunas estrategias comunes para escalar privilegios en CTFs, varias de las cuales se encuentran enumeradas en <a href=https://d00mfist1.gitbooks.io/ctf/content/privilege_escalation_-_linux.html>este apunte</a>. Todas estas estrategias asumen que ya tienes un usuario con (al menos) permisos limitados en la máquina del CTF.</p><ol><li><p><strong>¿Qué privilegios tengo por defecto?</strong>: Tal vez la cuenta en la que estás logueado ya tiene permisos de superusuario. Para revisar esto, podemos ejecutar el comando <code>sudo -ll</code>. Este comando entregará información de si el usuario actual es o no un superusuario, o si tiene permisos para ejecutar algunos comandos con estos privilegios.</p></li><li><p><strong>¿Están bien colocados los permisos y <em>owners</em> de carpetas sensibles?</strong>: Vale la pena revisar si las carpetas sensibles del sistema poseen los permisos correctos. Por ejemplo, la carpeta <code>/root/</code> podría estar abierta a lectura o incluso escritura para todos los usuarios (<code>r o rw</code> en <code>other</code>). Esto se puede automatizar usando el comando <code>file</code> y la flag <code>-perm</code> seguida de <code>-ugo</code> (ojo con el guión al inicio), donde <code>u</code>, <code>g</code> y <code>o</code> son números en base octal que representan los permisos a buscar para el usuario (<code>u</code>), el grupo (<code>o</code>) o cualquiera (<code>o</code>). También están disponibles las flags <code>-group</code> y <code>-name</code> para filtrar por nombre y/o grupo del archivo o carpeta.</p><ul><li><code>find / -perm -007</code> buscaría desde la raíz del sistema de archivos todos los ficheros ejecutables por cualquier usuario.</li><li><code>find / -name root</code> buscaría desde la raíz del sistema de archivos todos los ficheros cuyo dueño es el usuario <code>root</code>.</li><li><code>find / -group root</code> buscaría desde la raíz del sistema de archivos todos los ficheros cuyo grupo es <code>root</code>.</li></ul></li><li><p><strong>¿Están bien colocados los privilegios de <code>/etc/shadow/</code>?</strong>: En el archivo <code>/etc/shadow</code> se guardan los hashes de las contraseñas de los usuarios del sistema. Si es legible, podemos intentar crackearlas con <em>John the Ripper</em>. Si es escribible, podemos cambiar un hash por uno elegido por nosotros:</p><ul><li><code>john --wordlist=&lt;wordlist> hash</code> permite encontrar la palabra que genera cierto hash, donde <code>hash</code> es un archivo con el hash del archivo <code>/etc/shadow</code>.</li><li><code>openssl passwd -1</code> crea un hash compatible con el archivo <code>/etc/shadow</code>.</li></ul></li><li><p><strong>¿Hay programas con flag <code>setuid/setgid</code> habilitadas para un usuario con privilegios?</strong>: Puede que exista un programa con flags <code>setuid/setgid</code> que reciba una entrada que sea explotable como para escalar privilegios o acceder a contenido restringido. Esto se puede revisar también con el comando <code>file</code> y la flag <code>-perm</code>, pero usando un número de 4 cifras (la primera siendo el valor de <code>setuid/setgid/sticky</code>):</p><ul><li><code>find / -perm -4000</code> buscaría desde la raíz del sistema de archivos todos los archivos con <code>setuid</code> encendido.</li></ul></li><li><p><strong>¿Hay algún proceso corriendo con privilegios de forma periódica?</strong>: En otros CTF existen programas que corren regularmente con un usuario con privilegios elevados, los cuales reciben de entrada algún archivo que es editable por un usuario con pocos privilegios. Modificar el archivo editable podría ayudar a cambiar el comportamiento del programa que corre automáticamente, facilitando la obtención de la <code>flag</code>. Es posible obtener estos procesos (y a veces la ruta del archivo ejecutable) con comandos especiales:</p><ul><li><strong>Todos los procesos corriendo</strong>: <code>ps aux</code> o <code>top</code>. En el caso de <code>top</code>, se muestra una tabla scrolleable con las flechas que muestra una lista de los procesos corriendo en la máquina.</li><li><strong>Procesos corriendo del usuario root</strong>: <code>ps -u root</code></li></ul></li><li><p><strong>¿Hay algún archivo de configuración con contraseñas?</strong>: Similar a lo que vimos en la unidad de forense, buscar archivos de configuración con usuarios/contraseñas en texto plano puede servir para escalar en privilegios, asumiendo que una de las contraseñas encontradas podría ser reutilizada como contraseña de un usuario con más permisos. Acá lo que podemos hacer es ejecutar algo como <code>grep -r password /</code> para buscar recursivamente en todos los archivos del sistema de archivos.</p></li><li><p><strong>¿Existe algún exploit específico para esta máquina?</strong>: A veces la versión exacta del kernel de Linux o de algún programa corriendo en el sistema es propensa a algún exploit conocido. Para encontrar exploits asociados al sistema, podemos buscar sus aplicaciones y versiones con el comando <code>searchsploit</code> de Kali, o también buscar <code>exploit &lt;programa> &lt;version></code> en nuestro buscador favorito para encontrar alguna prueba de concepto que nos permita escalar privilegios.</p><ul><li>Para saber cuál es la versión del kernel de linux del sistema, ejecutar <code>uname -r</code>.</li></ul></li></ol><h2 id=bypasses-en-programas-especiales>Bypasses en programas especiales<a href=#bypasses-en-programas-especiales class=anchor aria-hidden=true>#</a></h2><p>A continuación mencionaremos algunos ejemplos de programas comunes que podrían estar asociados a <code>root</code> u otro usuario con privilegios y que podrían tener el byte <code>setuid</code> encendido, los cuales pueden ser usados para la ejecución arbitraria de código:</p><ul><li><strong>awk</strong>: el comando <code>system("/bin/bash")</code> dentro de un bloque de <code>awk</code> permite ejecutar un programa de sistema, en este caso, una shell.<ul><li><code>awk 'BEGIN {system("/bin/bash")}'</code></li></ul></li><li><strong>find</strong>: la flag <code>exec</code> permite ejecutar un comando sobre cada archivo encontrado. El siguiente comando podría servir para levantar una shell:<ul><li><code>find --exec bash -i</code>.</li></ul></li><li><strong>vim</strong>: Luego de iniciar <code>vim</code>, si presionas <code>escape</code>, escribes <code>:shell</code> y presionas <code>enter</code> podrás levantar una shell.</li><li><strong>less</strong>: <code>less</code> es un programa que sirve para ver archivos de texto extensos de forma paginada. Si se presiona la tecla <code>v</code> luego de abrir un archivo con <code>less</code>, se abrirá <code>vim</code> con los mismos permisos que <code>less</code>.</li><li><strong>more</strong>: Al igual que <code>less</code>, <code>more</code> permite leer archivos extensos. Si <code>more</code> abre un archivo cuya cantidad de líneas es mayor a la cantidad de líneas de la ventana de terminal, es posible levantar una shell escribiendo <code>!/bin/bash</code>.</li></ul><p>Muchos otros ejemplos aparecen en <a href=https://d00mfist1.gitbooks.io/ctf/content/privilege_escalation_-_linux.html>este apunte</a>, en la sección <em>Abusing sudo-rights</em>. Además, <a href=https://gtfobins.github.io/>este sitio</a> agrupa una lista colaborativa de cientos de binarios con estas características.</p><p>La recomendación general es que al encontrar algún otro programa con <code>setuid</code> y <code>owner root</code>, investiguen si existe una forma de ejecutar código arbitrario. Si el programa es conocido, busquen en su documentación o sitios de referencia y ayuda. Si el programa es un script propio de la máquina, revisen su código fuente para ver cómo abusar de sus funcionalidades para ejecutar código arbitrario.</p><h2 id=scripts-de-enumeración-automática>Scripts de enumeración automática<a href=#scripts-de-enumeración-automática class=anchor aria-hidden=true>#</a></h2><p>Existen muchas herramientas de código abierto que automatizan algunas de las recomendaciones entregadas en el paso anterior, además de ejecutar otras técnicas más avanzadas para intentar escalar privilegios en una máquina de CTF. A continuación enumeramos algunos de estos programas:</p><ul><li><a href=https://github.com/mzet-/linux-exploit-suggester>Linux Exploit Suggester</a></li><li><a href=https://github.com/rebootuser/LinEnum>LinEnum</a></li><li><a href=http://pentestmonkey.net/tools/audit/unix-privesc-check>Unix-Privesc-Check</a></li><li><a href=https://github.com/reider-roque/linpostexp/blob/master/linprivchecker.py>LinPrivchecker.py</a></li></ul><p>Les recomendamos revisar también <a href=https://github.com/Ignitetechnologies/Privilege-Escalation>este enlace</a> para encontrar harto material de escalamiento de privilegios.</p><h3 id=reverse-shell>Reverse Shell<a href=#reverse-shell class=anchor aria-hidden=true>#</a></h3><p>En algunas ocasiones, si bien no podemos escalar privilegios directamente en el sistema, sí podemos hacer que el usuario root ejecute (a través de un trabajo periódico o de otra forma) un comando a nuestra elección. En estos casos, nos conviene levantar una <code>reverse shell</code>, es decir, hacer que el usuario root abra una sesión de shell y la deje disponible para que nos conectemos a ella vía <code>nc</code>. Pueden ver la sección dedicada a <code>reverse shells</code> en la unidad de Aplicaciones Web para encontrar una explicación más detallada de esta técnica.</p><p class=edit-page><a href=https://github.com/cc5325/apunte/blob/main/content/docs/pwning/escalamiento-privilegios.md><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit-2"><path d="M17 3a2.828 2.828.0 114 4L7.5 20.5 2 22l1.5-5.5L17 3z"/></svg>Editar en GitHub</a>
<span class=date-info><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>Modificado por última vez el 17/06/2021 a las 11:12:48 hrs.</span></p><div class="docs-navigation d-flex justify-content-between"><a href=/docs/reversa/deobfuscation/><div class="card my-1"><div class="card-body py-2">&larr; Deobfuscación</div></div></a><a class=ml-auto href=/docs/anexos/kali/><div class="card my-1"><div class="card-body py-2">Kali Linux &rarr;</div></div></a></div></main></div></div></div><footer class="footer text-muted"><div class=container><div class=row><div class="col-lg-8 order-last order-lg-first"><ul class=list-inline><li class=list-inline-item>Sitio generado con <a href=https://gohugo.io/>Hugo</a> y <a href=https://getdoks.org/>Doks</a></li></ul></div><div class="col-lg-8 order-first order-lg-last text-lg-right"><ul class=list-inline><a href="http://creativecommons.org/licenses/by-sa/4.0/?ref=chooser-v1" target=_blank rel="license noopener noreferrer" style=display:inline-block>CC BY-SA 4.0<img style=height:22px!important;margin-left:3px;vertical-align:text-bottom src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1"><img style=height:22px!important;margin-left:3px;vertical-align:text-bottom src="https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1"><img style=height:22px!important;margin-left:3px;vertical-align:text-bottom src="https://mirrors.creativecommons.org/presskit/icons/sa.svg?ref=chooser-v1"></a></ul></div></div></div></footer><script src=/main.2507c05f91ee016250e43b67b3d342f5a0d9d4dc5264f76cdc4518cd36a9e04cf3022ce8362802e618d8130b6733b53ee845a49e67229eeb3d3e70347db96a2b.js integrity="sha512-JQfAX5HuAWJQ5Dtns9NC9aDZ1NxSZPds3EUYzTap4EzzAizoNigC5hjYEwtnM7U+6EWknmcinus9PnA0fblqKw==" crossorigin=anonymous defer></script><script src=/index.min.cc1bf0400fb25b4cb1b05b0dd5ab58b5c74665650af6007b5de3fdaafd2a9966466dc83e85d5846bf376f6285a058810db2c2661d8f92c2b430c986d7ea17345.js integrity="sha512-zBvwQA+yW0yxsFsN1atYtcdGZWUK9gB7XeP9qv0qmWZGbcg+hdWEa/N29ihaBYgQ2ywmYdj5LCtDDJhtfqFzRQ==" crossorigin=anonymous defer></script><script>MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']],displayMath:[['$$','$$'],['\\[','\\]']],processEscapes:true,processEnvironments:true},options:{skipHtmlTags:['script','noscript','style','textarea','pre']}};window.addEventListener('load',(event)=>{document.querySelectorAll("mjx-container").forEach(function(x){x.parentElement.classList+='has-jax'})});</script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script></body></html>